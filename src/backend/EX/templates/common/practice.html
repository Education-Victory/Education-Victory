{% extends "basic.html" %} {% load static %} {% block extra_css %}
<link rel="stylesheet" href="{% static 'css/swiper-bundle.min.css' %}" />
<link rel="stylesheet" href="{% static 'css/practice.css' %}" />
{% endblock %} {% block content %}
<span id="vue-span">
  <section class="section">
    <div class="container">
      <div class="columns">
        <!-- Left column with cards -->
        <div class="column is-2">
          <aside class="menu">
            <p class="menu-label">Company</p>
            <ul class="menu-list">
              <li v-for="(dropdown, index) in dropdowns" :key="index" class="dropdown" :class="{'is-active': dropdown.isActive}">
                <a class="dropdown-trigger" @click="toggleDropdown(index)">
                  <span>[[ dropdown.label ]]</span>
                  <span class="icon is-small">
                    <i class="fa-solid fa-angle-down" :class="{'is-active': dropdown.isActive}"></i>
                  </span>
                </a>
                <div class="dropdown-menu" role="menu">
                  <div class="dropdown-content">
                    <a href="#" v-for="item in dropdown.items" class="dropdown-item" @click="updateDropdownLabel(index, item)">
                      [[ item ]]
                    </a>
                  </div>
                </div>
              </li>
            </ul>
            <p class="menu-label">Category</p>
            <ul class="menu-list">
              <li><a class="is-active">All</a></li>
              <li><a>Algorithm</a></li>
              <li><a>System Design</a></li>
              <li><a>Behavioural</a></li>
              <li><a>Computer Science</a></li>
            </ul>
            <p class="menu-label">Position Type</p>
            <ul class="menu-list">
              <li><a class="is-active">All</a></li>
              <li><a>Software Engineer</a></li>
              <li><a>Frontend Engineer</a></li>
              <li><a>Machine Learning</a></li>
              <li><a>Data Scientist</a></li>
            </ul>
            <p class="menu-label">Stage</p>
            <ul class="menu-list">
              <li><a class="is-active">All</a></li>
              <li><a>Phone</a></li>
              <li><a>Onsite</a></li>
            </ul>
          </aside>
        </div>
        <!-- Right column with the timeline -->
        <div class="column">
          <ul class="timeline">
            <!-- Dynamically create timeline items for each problem -->
            <div class="columns is-multiline">
              <li class="column is-4 timeline-item" v-for="obj in problems" :key="obj.id">
                <div class="timeline-marker"></div>
                <div class="timeline-content">
                  <div class="card">
                    <div class="card-content">
                      <span class="tag is-info top">New</span>
                      <div class="content is-flex is-justify-content-space-between is-align-items-center">
                        <div>
                          <!-- Display problem name -->
                          <h2 class="title is-size-5 mb-2">[[ obj.problem.name ]]</h2>
                          <span class="tag is-light">abc</span>
                          <span class="tag is-light">eft</span>
                        </div>
                      </div>
                      <div class="content mb-1 is-flex is-justify-content-space-between is-align-items-center">
                        <p class="mb-0 is-size-6">Popularity</p>
                        <progress class="progress ml-4 is-primary practice-progress" :value="[[ obj.total_score ]]" max="100">[[ obj.total_score ]]</progress>
                      </div>
                      <div class="content mb-1 is-flex is-justify-content-space-between is-align-items-center">
                        <!-- Calculate estimated time based on question types -->
                        <p class="mb-0 is-size-6">Frequency (Last Year)</p>
                        <span class="tag is-success is-light">100%</span>
                      </div>
                      <div class="content mb-1 is-flex is-justify-content-space-between is-align-items-center">
                        <!-- Calculate estimated time based on question types -->
                        <p class="mb-0 is-size-6">Diffculty</p>
                      </div>
                    </div>
                    <div class="card-footer">
                      <div class="card-footer-item">
                        <div class="is-flex" style="width: 100%;">
                          <a class="button is-info ml-auto">Start</a>
                        </div>
                      </div>
                    </div>
                    <!-- end card-footer -->
                  </div>
                  <!-- end card -->
                </div>
              </li>
            </div>
          </ul>
        </div>
      </div>
    </div>
  </section>
</span>
{% endblock %} {% block extra_script %}
<script>
var root = "{{ root }}";
var app = new Vue({
  delimiters: ["[[", "]]"],
  el: "#vue-span",
  data() {
    return {
      problems: [],
      message: "",
      category: "recommend",
      root: root,
      dropdowns: [
        {
          label: "All",
          isActive: false,
          items: ["Google", "Meta", "Amazon", "TikTok"],
        },
      ],
    };
  },
  mounted() {
    this.fetchProblem();
  },
  methods: {
    toggleDropdown(index) {
      this.dropdowns[index].isActive = !this.dropdowns[index].isActive;
      this.dropdowns.forEach((dropdown, idx) => {
        if (idx !== index) dropdown.isActive = false;
      });
    },
    updateDropdownLabel(index, item) {
      this.dropdowns[index].label = item;
      this.dropdowns[index].isActive = false;
    },
    fetchProblem() {
      const url = `${this.root}/api/problem_list/`;
      axios.get(url)
        .then((response) => {
          this.problems = response.data;
          console.log(this.problems);
        })
        .catch((error) => {
          console.error("An error occurred while fetching the problems:", error);
          this.message = "An error occurred while fetching the problems.";
        });
    },
    updateCategory(category) {
      this.category = category;
      this.fetchProblem();
    },
  },
});
</script>
{% endblock %}

